!function(a){function f(a){return a+="",a[0].toUpperCase()+a.substr(1)}function g(b){this.settings=a.extend(!0,{},g.defaultSettings,b),this._init(),e=this}var e,b="apst-",c="apst",d="apst";String.prototype.ucfirst||(String.prototype.ucfirst=function(){return f(this)}),g.prototype={_init:function(){this._addScrollTopElement(),this._registerScrollEvent(),this._updateCssClasses(),this._updatePosition(),this._updateScrollElementVisibility(),this._trigger("init")},_addScrollTopElement:function(){var d=this;"function"==typeof this.settings.customButton?this._scrollTopWrapper=this.settings.customButton(this.settings):(this._scrollTopWrapper=a("<div></div>",{class:b+"wrapper"}),this._scrollTopButton=a("<div></div>",{class:b+"button"}),this._scrollTopWrapper.append(this._scrollTopButton)),this._scrollTopWrapper.data("visible",!1),a("body").append(this._scrollTopWrapper),this._getButton().on("click."+c,function(){d.scrollTo()})},_getButton:function(){var a=this._scrollTopWrapper.find("."+b+"button");return 0==a.length&&(a=this._scrollTopWrapper),a},_registerScrollEvent:function(){var b=this;a(document).ready(function(){a(window).scroll(function(a){b._updateScrollElementVisibility()})})},_updateScrollElementVisibility:function(){var a=this;this.settings.enabled&&this._isVisible()&&!this._scrollTopWrapper.data("visible")?(this._scrollTopWrapper.stop(!0,!1).fadeIn(this.settings.visibilityFadeSpeed,function(){a._updateCssClasses(),a._trigger("toggle",{visible:!0})}),this._scrollTopWrapper.data("visible",!0)):(!this._isVisible()&&this._scrollTopWrapper.data("visible")||!this.settings.enabled)&&(this._scrollTopWrapper.stop(!0,!1).fadeOut(this.settings.visibilityFadeSpeed,function(){a._updateCssClasses(),a._trigger("toggle",{visible:!1})}),this._scrollTopWrapper.data("visible",!1))},_isVisible:function(){var b=a(window).scrollTop();return"function"==typeof this.settings.visibilityTrigger?this.settings.visibilityTrigger(b):b>=parseInt(this.settings.visibilityTrigger)},_updateCssClasses:function(){if(this.settings.enabled?(this._scrollTopWrapper.addClass(b+"enabled"),this._scrollTopWrapper.removeClass(b+"disabled")):(this._scrollTopWrapper.addClass(b+"disabled"),this._scrollTopWrapper.removeClass(b+"enabled")),this._scrollTopWrapper.data("visible")?(this._scrollTopWrapper.addClass(b+"visible"),this._scrollTopWrapper.removeClass(b+"hidden")):(this._scrollTopWrapper.addClass(b+"hidden"),this._scrollTopWrapper.removeClass(b+"visible")),"string"==typeof this.settings.theme||this.settings.theme.length>0){var a=b+"theme-"+this.settings.theme;this._scrollTopWrapper.hasClass(a)||this._scrollTopWrapper.addClass(a)}this._trigger("cssClassesUpdated")},_updatePosition:function(){var a=["top","bottom","left","center","right"];if("string"==typeof this.settings.position){var c=this.settings.position.split(" ");for(index in c){var d=c[index].trim();a.indexOf(d)>-1&&this._scrollTopWrapper.addClass(b+c[index])}this._trigger("positionUpdated")}},_trigger:function(b,c){var e="on"+b.ucfirst(),f=this.settings[e];"function"==typeof f&&f.apply(a(this),c),b=d+b.ucfirst(),a(this).trigger(b,c)},_triggerHandler:function(b,c){var h,e="on"+b.ucfirst(),f=this.settings[e],g=void 0;return"function"==typeof f&&(g=f.apply(a(this),c)),b=d+b.ucfirst(),h=void 0!==(h=a(this).triggerHandler(b,c))?h:g},enable:function(){this.settings.enabled||(this.settings.enabled=!0,this._updateCssClasses(),this._updateScrollElementVisibility(),this._trigger("enabled"))},disable:function(){this.settings.enabled&&(this.settings.enabled=!1,this._updateCssClasses(),this._updateScrollElementVisibility(),this._trigger("disabled"))},scrollTo:function(b,c){var d=this;b=void 0!=b?b:0,c=c||this.settings.scrollSpeed;var e=this._triggerHandler("beforeScrollTo",{position:b,speed:c});"number"==typeof e?b=parseInt(e):"object"==typeof e&&(e.position&&(b=parseInt(e.position)),e.speed&&(c=parseInt(e.speed))),a("html, body").animate({scrollTop:b},c,function(){d._trigger("scrolledTo",{position:b})})},option:function(b,c){if(!b)return a.extend({},this.settings);var d;if("string"==typeof b){if(1===arguments.length)return void 0!==this.settings[b]?this.settings[b]:null;d={},d[b]=c}else d=b;this._setOptions(d)},_setOptions:function(a){for(key in a){var c=a[key];if("position"==key&&this._scrollTopWrapper.removeClass(b+"top "+b+"bottom "+b+"left "+b+"center "+b+"right"),"theme"==key){var d=b+"theme-"+this.settings.theme;this._scrollTopWrapper.hasClass(d)&&this._scrollTopWrapper.removeClass(d)}this.settings[key]=c,["enabled","visibilityTrigger","theme"].indexOf(key)>-1&&this._updateCssClasses(),["enabled","visibilityTrigger"].indexOf(key)>-1&&this._updateScrollElementVisibility(),["position"].indexOf(key)>-1&&this._updatePosition()}},destroy:function(){this._trigger("destroy"),this._getButton().off("click."+c),this._scrollTopWrapper.remove()}},a.apScrollTop=function(b){if(e||new g(b),"string"==typeof b){var c,d,f=Array.prototype.slice.call(arguments,1);if("function"==typeof(c=e[b])&&"_"!==b.charAt(0))return d=c.apply(e,f),void 0!==d?d:a(e)}return a(e)},g.defaultSettings={enabled:!0,visibilityTrigger:200,visibilityFadeSpeed:150,scrollSpeed:1500,position:"right bottom",customButton:void 0,theme:"default"}}(jQuery);