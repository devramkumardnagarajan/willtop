{"version":3,"sources":["jquery.singlefull.js"],"names":["Array","prototype","indexOf","searchElement","fromIndex","k","this","TypeError","O","Object","len","length","n","Math","abs","Infinity","max","$","window","fn","singlefull","options","scrollPage","event","preventDefault","sectionListLength","sectionList","delta","originalEvent","wheelDelta","detail","nextIndex","currentIndex","isCanScroll","opts","loopScroll","loopTop","loopBottom","goToSection","secName","targetPosition","section","position","top","isAnimating","changeAnchorClass","animate","scrollTop","duration","scrollingSpeed","easing","complete","anchor","removeClass","addClass","changeCSS","element","windowWidth","windowHeight","height","targetsSize","css","width","children","each","changeIMG","index","src","attr","imgName","imgFinal","imgSplit","imagePrefix","checkResolution","match","re","RegExp","m","exec","replace","split","sufixes","smallest","small","medium","normal","extend","defaults","elem","push","document","on","keyboard","code","keyCode","navigation","navigationPosition","bind","target","targetIndex","jQuery"],"mappings":"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","file":"jquery.singlefull.min.js","sourcesContent":[";\r\n// The polyfill for Array.prototype.indexOf\r\nif (!Array.prototype.indexOf) {\r\n    Array.prototype.indexOf = function(searchElement, fromIndex) {\r\n        var k;\r\n        if (this == null) {\r\n            throw new TypeError('\"this\" is null or not defined');\r\n        }\r\n        var O = Object(this);\r\n        var len = O.length >>> 0;\r\n        if (len === 0) {\r\n            return -1;\r\n        }\r\n        var n = +fromIndex || 0;\r\n\r\n        if (Math.abs(n) === Infinity) {\r\n            n = 0;\r\n        }\r\n        if (n >= len) {\r\n            return -1;\r\n        }\r\n        k = Math.max(n >= 0 ? n : len - Math.abs(n), 0);\r\n        while (k < len) {\r\n            if (k in O && O[k] === searchElement) {\r\n                return k;\r\n            }\r\n            k++;\r\n        }\r\n        return -1;\r\n    };\r\n}\r\n\r\n\r\n\r\n;\r\n(function($, window) {\r\n    //'use strict';\r\n    $.fn.singlefull = function(options) {\r\n\r\n        var opts = $.extend({}, $.fn.singlefull.defaults, options);\r\n\r\n        var sectionList = []; // 页面section名称集合\r\n        $(\"[\" + opts.section + \"]\").each(function(index, elem) {\r\n            sectionList.push($(this).attr(opts.section));\r\n        });\r\n\r\n        var currentIndex = 0; // 记录当前滚动页面的index\r\n        var isAnimating = false; // 记录当前页面是否在动画中，若在动画中则不再响应鼠标滚轮事件\r\n\r\n\r\n        // 监听鼠标滚轮事件\r\n        $(document).on(\"mousewheel DOMMouseScroll MozMousePixelScroll\", scrollPage);\r\n\r\n        if (opts.keyboard) {\r\n            // 监听键盘事件\r\n            $(document).on(\"keydown\", function(event) {\r\n                var code = event.keyCode;\r\n                if (code == 38 || code == 40) {\r\n                    var sectionListLength = sectionList.length;\r\n                    var nextIndex = (code == 38) ? ((sectionListLength + currentIndex - 1) % sectionListLength) : ((sectionListLength + currentIndex + 1) % sectionListLength);\r\n                    goToSection(sectionList[nextIndex], opts);\r\n                }\r\n\r\n            });\r\n        }\r\n\r\n        // 是否出现导航点\r\n        if (!opts.navigation) {\r\n            $('#fp-nav').css('display', 'none');\r\n        } else {\r\n            $('#fp-nav').addClass(opts.navigationPosition);\r\n        }\r\n\r\n\r\n        return this.each(function() {\r\n\r\n            // Get the instance\r\n            var element = $(this);\r\n\r\n            // Resize the \"data-target\" divs\r\n            changeCSS(element);\r\n            // Resize all the \"data-img='true'\" images\r\n            changeIMG(opts);\r\n\r\n            // Bind the methods changeCSS and changeIMG to the resize window event\r\n            $(window).on(\"resize\", function() {\r\n                changeCSS(element);\r\n                changeIMG(opts);\r\n            });\r\n\r\n\r\n            // 右侧锚绑定点击事件\r\n            $('[' + opts.anchor + ']').bind(\"click\", function(event) {\r\n                event.preventDefault();\r\n                var target = $(this).attr(opts.anchor);\r\n                var targetIndex = sectionList.indexOf(target);\r\n                goToSection(sectionList[targetIndex], opts);\r\n            });\r\n\r\n\r\n\r\n        });\r\n\r\n        // function to handle mousewheel event\r\n        function scrollPage(event) {\r\n            event.preventDefault();\r\n            var sectionListLength = sectionList.length;\r\n            var delta = event.originalEvent.wheelDelta || -event.originalEvent.detail;\r\n            var nextIndex = delta > 0 ?\r\n                ((sectionListLength + currentIndex - 1) % sectionListLength) :\r\n                ((sectionListLength + currentIndex + 1) % sectionListLength);\r\n            // 出现首尾轮播时，判断是否允许\r\n            var isCanScroll = opts.loopScroll;\r\n            if (currentIndex == 0 && nextIndex == sectionListLength - 1) {\r\n                isCanScroll = isCanScroll && opts.loopTop;\r\n            }\r\n\r\n            if (nextIndex == 0 && currentIndex == sectionListLength - 1) {\r\n                isCanScroll = isCanScroll && opts.loopBottom;\r\n            }\r\n            if (isCanScroll) {\r\n                goToSection(sectionList[nextIndex], opts);\r\n            }\r\n        }\r\n\r\n\r\n        // function to scroll the page to a section\r\n        function goToSection(secName, opts) {\r\n            // get the position of the target\r\n            var targetPosition = $('[' + opts.section + '=\"' + secName + '\"]').position().top;\r\n            // 当前页面正在动画时，不响应此次事件\r\n            if (!isAnimating) {\r\n                isAnimating = true;\r\n                currentIndex = sectionList.indexOf(secName);\r\n                changeAnchorClass();\r\n                // jQuery Easing animation\r\n                $(\"html,body\").animate({\r\n                    scrollTop: targetPosition\r\n                }, {\r\n                    duration: opts.scrollingSpeed,\r\n                    easing: opts.easing,\r\n                    complete: function() {\r\n                        isAnimating = false; // 动画完成，解除锁定\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n\r\n        // 改变锚的样式\r\n        function changeAnchorClass() {\r\n            if ($('[' + opts.anchor + ']').length) {\r\n                $('[' + opts.anchor + ']').removeClass('active');\r\n                $('[' + opts.anchor + '= \"' + sectionList[currentIndex] + '\"]').addClass('active');\r\n            }\r\n        }\r\n\r\n\r\n        // function to resize all the \"data-target\" divs\r\n        function changeCSS(element) {\r\n\r\n            // Grab the screen resolution\r\n            var windowWidth = \"100%\";\r\n            var windowHeight = $(window).height();\r\n            // Count how many targets the div has\r\n            var targetsSize = $(\"[\" + opts.section + \"]\").length;\r\n\r\n            // Resize the parent div\r\n            $(element).css({\r\n                \"width\": windowWidth,\r\n                \"height\": windowHeight * targetsSize\r\n            });\r\n\r\n            // Resize all the targets div\r\n            $(element).children(\"div[\" + opts.section + \"]\").each(function() {\r\n                $(this).css({\r\n                    \"width\": windowWidth,\r\n                    \"height\": windowHeight\r\n                });\r\n            });\r\n        }\r\n\r\n        // function to resize the images\r\n        function changeIMG(opts) {\r\n            // Grab the screen resolution\r\n            windowWidth = $(window).width();\r\n            $(\"img[data-img='true']\").each(function(index, element) {\r\n                src = $(element).attr('src');\r\n                imgName = \"\";\r\n                imgFinal = \"\";\r\n                imgSplit = {};\r\n                imagePrefix = checkResolution(windowWidth, opts);\r\n                if (src.match(\"/\")) { // Match if there's a full URL at the IMG src and cut it\r\n                    re = new RegExp(\".*\\/(.*)$\");\r\n                    m = re.exec(src);\r\n                    imgName = m[1];\r\n                } else {\r\n                    // Just the img without an URL\r\n                    imgName = src;\r\n                }\r\n                if (imgName.match(/\\-\\w+/)) {\r\n                    src = src.replace(/\\-\\w+/, imagePrefix);\r\n                } else {\r\n                    // Split the name of the extension\r\n                    imgSplit = imgName.split('.');\r\n                    // Replace the name with the image prefix\r\n                    imgFinal = imgSplit[0] + imagePrefix + '.' + imgSplit[1];\r\n                    src = src.replace(imgName, imgFinal);\r\n                }\r\n                // Replace the image\r\n                $(element).attr('src', src);\r\n            });\r\n\r\n        }\r\n\r\n        // function to check the resolution and return the prefix for the image\r\n        function checkResolution(windowWidth, opts) {\r\n\r\n            if (windowWidth <= 480) {\r\n                return opts.sufixes.smallest;\r\n            }\r\n\r\n            if (windowWidth > 480 && windowWidth <= 767) {\r\n                return opts.sufixes.small;\r\n            }\r\n\r\n            if (windowWidth > 767 && windowWidth <= 979) {\r\n                return opts.sufixes.medium;\r\n            }\r\n\r\n            if (windowWidth > 979) {\r\n                return opts.sufixes.normal;\r\n            }\r\n\r\n        }\r\n\r\n    };\r\n\r\n    // Plugin defaults\r\n    $.fn.singlefull.defaults = {\r\n        scrollingSpeed: 1000,\r\n        easing: \"easeOutExpo\",\r\n        // section 是页面滚动的基本单位，需要一页显示的div请添加定义的属性，默认data-target\r\n        section: 'data-target',\r\n        // anchor 是页面锚，通过点击锚跳转至特定section，默认data-anchor\r\n        anchor: 'data-anchor',\r\n\r\n        // ************  Scrolling  **********//\r\n        keyboard: true, // 是否接受键盘操作\r\n        loopScroll: true, // 是否允许循环轮播  优先级高于loopTop与loopBottom \r\n        loopTop: true, // 是否允许从第一页滚屏至最后一页\r\n        loopBottom: true, // 是否允许从最后一页滚屏至第一页\r\n\r\n        // ************  Navigation  **********//\r\n        navigation: true, // 是否允许出现导航点\r\n        navigationPosition: 'right', // 导航点的位置，默认在右边\r\n        // 根据屏幕大小决定图片的前缀\r\n        sufixes: {\r\n            smallest: \"-smallest\",\r\n            small: \"-small\",\r\n            medium: \"-medium\",\r\n            normal: \"\" // Leave blank for no prefix\r\n        }\r\n    };\r\n})(jQuery, window);\r\n"],"sourceRoot":"/source/"}